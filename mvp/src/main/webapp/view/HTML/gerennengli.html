<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>可视化度量平台</title>
    <link rel="stylesheet" href="css/DefaultSkin.css" type="text/css" />
    <script type="text/javascript" src="js/jquery-1.11.1.min.js"></script>
    <script type="text/javascript" src="../../resources/easyui/jquery.easyui.min.js"></script>
    <script type="text/javascript" src="../../resources/js/comm/datagrid-header-tooltip.js"></script>
    <script type="text/javascript" src="js/echarts.common.min.js"></script>
    <script type="text/javascript" src="../../resources/underscore/underscore.js"></script>
    <script type="text/javascript" src="../../resources/js/comm/comm.js"></script>
    <script type="text/javascript" src="js/gerennengli.js"></script>
    <style>
    	.namespan{  
		    display: inline-block;
		    width: 100px;
		    overflow: hidden;
		    text-overflow: ellipsis;
		    white-space: nowrap;
		}
    </style>
</head>
<body>
    <table width="99.5%" border="0" cellspacing="0" cellpadding="0" style="margin: 0px 5px 0px 5px;">
        <tr>
            <td>
                <div class="change-chart">
                    <div class="chart-title" style="line-height: 40px;">
                        <div style="float: left;"><span style="font-size: 16px;">开发效率</span></div>
                        <div style="border-right: 1px #2e8afc solid;height: 40px;width: 15px;float: left;"></div>
                        <div style="border-right: 2px #2e8afc solid;height: 40px;width: 2px;float: left;"></div>
                    	<span style="color:#2e8afc;float: right;">起始日期:
                    		<input style="border-color:#2e8afc;color: #2e8afc;
	                    		background-image: url(images/dateicon.png); /*引入图片图片*/
						        background-repeat: no-repeat; /*设置图片不重复*/
						        background-position: 5px 1px; /*图片显示的位置*/
						        padding-left: 30px"
	                    	    type="date" value="2015-09-24"/>
                    	   	<img src="images/editicon.png" alt="编辑" style="margin-bottom:-4px;"/>
                    	</span>    
                    </div>
                    <div style="padding-top: 10px;padding-left: 30px;">
                    	<select id="develop-sel" style="border-color:#2e8afc ;color:#2e8afc;">
                    		<option selected="selected" style="color: black">每月新增修改代码量</option>
                    		<option style="color: black">每两周新增修改代码量</option>
                    	</select>
                    </div>
                    <div class="chart" style="margin-top: 10px;">
                        <div id="Div1" style="width: 100%; height: 330px;">
                        </div>
                    </div>
                    <div class="main-button" style="display: none;">
                    	<span style="font-size: 16px;padding-left:10px">需求代码量(KB)</span>
                    	<span style="float: right;margin-right: 20px;display: none;">
	                    	<input id ="cancel"   type="button" value="取消" style="border-color: #2e8afc;color:#2e8afc;background-color: white;padding: 2px 5px 2px 5px;font-size: 10px;border-radius:5px; " />
	                    	<input id = "save"  type="button" value="保存" style="border-color: #2e8afc;color:#fff;background-color: #2e8afc;padding: 2px 5px 2px 5px;font-size: 10px;border-radius:5px;"/>
                    	</span>
                    </div>
                    <table style="display: none;" width="100%" border="0" cellspacing="0" cellpadding="0" class="data-table">
                        <thead>
                            <tr bgcolor="#b4aeb5">
                                <td style="line-height: 30px;">
                                    月份
                                </td>
                                <td style="line-height: 30px;">
                                    需求预算
                                </td>
                                <td style="line-height: 30px;">
                                    <span title="XX">需求实际</span>
                                </td>
                                <td style="line-height: 30px;">
                                    <span title="XX">累计代码缺口</span>
                                </td>
                                <td style="line-height: 30px;">
                                    <span title="XX">完成率</span>
                                </td>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>
                                    XXXX
                                </td>
                                <td>
                                    XXXX
                                </td>
                                <td>
                                    XXX
                                </td>
                                <td>
                                    XX
                                </td>
                                <td>
                                    XXXX
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    XXXX
                                </td>
                                <td>
                                    XXXX
                                </td>
                                <td>
                                    XXX
                                </td>
                                <td>
                                    XX
                                </td>
                                <td>
                                    XXXX
                                </td>
                            </tr>
                             <tr>
                                <td>
                                    XXXX
                                </td>
                                <td>
                                    XXXX
                                </td>
                                <td>
                                    XXX
                                </td>
                                <td>
                                    XX
                                </td>
                                <td>
                                    XXXX
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <div class="main-button">
                    	<span style="font-size: 16px;padding-left:10px;">员工个人代码量(KB)</span>
                    </div>
                    <table width="100%" border="0" cellspacing="0" cellpadding="0" class="data-table" id="gerenCode">
                        <thead>
                            <tr bgcolor="#b4aeb5">
                                <td style="line-height: 30px;">
                                    姓名
                                </td>
                                <td style="line-height: 30px;">
                                   工号
                                </td>
                                <td style="line-height: 30px;">
                                    <span title="XX">1月</span>
                                </td>
                                <td style="line-height: 30px;">
                                    <span title="XX">2月</span>
                                </td>
                                <td style="line-height: 30px;">
                                    <span title="XX">3月</span>
                                </td>
                                <td style="line-height: 30px;">
                                    <span title="XX">4月</span>
                                </td>
                                <td style="line-height: 30px;">
                                    <span title="XX">5月</span>
                                </td>
                                <td style="line-height: 30px;">
                                    <span title="XX">6月</span>
                                </td>
                                <td style="line-height: 30px;">
                                    <span title="XX">7月</span>
                                </td>
                                <td style="line-height: 30px;">
                                    <span title="XX">8月</span>
                                </td>
                                <td style="line-height: 30px;">
                                    <span title="XX">9月</span>
                                </td>
                                <td style="line-height: 30px;">
                                    <span title="XX">10月</span>
                                </td>
                                <td style="line-height: 30px;">
                                    <span title="XX">11月</span>
                                </td>
                                <td style="line-height: 30px;">
                                    <span title="XX">12月</span>
                                </td>
                                 <td style="line-height: 30px;">
                                    <span title="XX">合计</span>
                                </td>
                            </tr>
                        </thead>
                        <tbody>
                        </tbody>
                    </table>
                </div>
                <div style="margin: 5px;margin-top: 20px;border-color: #ddd;border-width: 1px;border-radius: 3px;border-style: solid;">
					<div class="chart-title" style="line-height: 40px;">
					      <div style="float: left;"><span style="font-size: 16px;">工程能力</span></div>
					      <div style="border-right: 1px #2e8afc solid;height: 40px;width: 15px;float: left;"></div>
					      <div style="border-right: 2px #2e8afc solid;height: 40px;width: 2px;float: left;"></div>
					</div>
                  
					<div class="change-chart"> 
					  <div style="padding-top: 10px;padding-left: 30px;">
                    	<select id="process-capability-sel" style="border-color:#2e8afc ;color:#2e8afc;">
                    		<option selected="selected" style="color: black">LLT自动化语句覆盖率</option>
                    		<option style="color: black">平均圈复杂度</option>
                    		<option style="color: black">代码重复率</option>
                    		<option style="color: black">静态检查警告(checkstyle、findbugs、pclint)</option>
                    		<option style="color: black">CodeCC(coverity、security、Fortify)</option>
                    		<option style="color: black">每日版本可用率</option>
                    		<option style="color: black">项目构建时长(版本级编译构建)</option>
                    		<option style="color: black">个人构建时长(个人级编译构建)</option>
                    	</select>
                    	</div>
						<div class="chart" style="margin-top: 10px;">
						    <div id="Div2" style="width: 100%; height: 330px;">
						    </div>
						</div>
						<div class="main-button">
							<span style="font-size: 16px;padding-left:10px;">工程能力指标</span>
						</div>
						<table width="100%" style="text-align: center;" border="0" cellspacing="0" cellpadding="0" class="data-table">
						    <thead>
						        <tr style="background-color: #eeeeee;">
						            <td style="line-height: 30px;width: 10%;">指标</td>
						            <td style="line-height: 30px;width: 10%;">平均圈复杂度</td>
						            <td style="line-height: 30px;width: 10%;">
						                <span title="代码重复率">代码重复率</span>
						            </td>
						            <td style="line-height: 30px;width: 15%;">
						                <span class="namespan" title="静态检查警告(checkstyle、findbugs、pclint)">静态检查警告(checkstyle、findbugs、pclint)</span>
						            </td>
						            <td style="line-height: 30px;width: 15%;">
						                <span class="namespan" title="CodeCC(coverity、security、Fortify)">CodeCC</span>
						            </td>
						            <td style="line-height: 30px;width: 10%;">
						                <span class="namespan" title="每日版本可用率">每日版本可用率</span>
						            </td>
						            <td style="line-height: 30px;width: 15%;">
						                <span class="namespan" title="项目构建时长(版本级编译构建)">项目构建时长(版本级编译构建)</span>
						            </td>
						            <td style="line-height: 30px;width: 15%;">
						                <span class="namespan" title="个人构建时长(个人级编译构建)">个人构建时长(个人级编译构建)</span>
						            </td>
						            <td style="line-height: 30px;width: 10%;">
						                <span class="namespan" title="LLT自动化语句覆盖率">LLT自动化语句覆盖率</span>
						            </td>
						        </tr>
						    </thead>
						    <tbody>
						        <tr><td>实际</td><td>XXXX</td><td>XXXX</td><td>XXXX</td><td>XXXX</td><td>XXXX</td><td>XXXX</td><td>XXXX</td><td>XXXX</td></tr>
						        <tr><td>目标</td><td>XXXX</td><td>XXXX</td><td>XXXX</td><td>XXXX</td><td>XXXX</td><td>XXXX</td><td>XXXX</td><td>XXXX</td></tr>
						        <tr><td>上限</td><td>XXXX</td><td>XXXX</td><td>XXXX</td><td>XXXX</td><td>XXXX</td><td>XXXX</td><td>XXXX</td><td>XXXX</td></tr>
						        <tr><td>下限</td><td>XXXX</td><td>XXXX</td><td>XXXX</td><td>XXXX</td><td>XXXX</td><td>XXXX</td><td>XXXX</td><td>XXXX</td></tr>
						    </tbody>
						</table>
					</div>
                </div>
            </td>
        </tr>
    </table>
    
    <script type="text/javascript">
		//鼠标悬停按钮事件 onmouseover="onmouse()" onmouseout="outmouse()"
		//<input id ="cancel" onmouseover="onmouse()" onmouseout="outmouse()" type="button" value="取消" style="border-color: #2e8afc;color:#2e8afc;background-color: white;padding: 2px 5px 2px 5px;font-size: 10px;border-radius:5px; " />
	    //<input id = "save" onmouseover="onmouse()" onmouseout="outmouse()" type="button" value="保存" style="border-color: #2e8afc;color:#fff;background-color: #2e8afc;padding: 2px 5px 2px 5px;font-size: 10px;border-radius:5px;"/>
		/* var save = document.getElementById("save");
		var cancel = document.getElementById("cancel");
		function onmouse(){
			save.style.color ="#2e8afc";
			save.style.backgroundcolor = "white";
			cancel.style.color ="#2e8afc";
			cancel.style.backgroundcolor = "white";
		};
		
		function outmouse(){
			save.style.color ="#fff";
			debugger
			save.style.backgroundcolor = "#2e8afc";
			cancel.style.color ="#fff";
			cancel.style.backgroundcolor = "#2e8afc";
			
		}; */
		
        // 基于准备好的dom，初始化echarts实例
        var myChart1 = echarts.init(document.getElementById('Div1'));
        // 指定图表的配置项和数据
        var option1 = {
        	title:{
        		
        	},
            tooltip: {},
            xAxis: {
            	type:'category',
            	splitLine:{show: false},//去除网格线
            	name:"月份(2018)",
            	nameTextStyle:{
            		color:'#333'
            		},
            	axisLabel:{
            		textStyle:{
            			color:'#333',
            		}
            	},
                axisLine:{
            		
                    color: '#333',
                 
                    lineStyle:{
                        color:'#2e8afc',
                        width: 2,
                    }
                },
                data: ["1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11", "12"],
            },
            yAxis: {
            	type:'value',
            	splitLine:{show: false},//去除网格线
            	name:"(KB)",
            	nameTextStyle:{
            		color:'#333'
            		},
            	axisLabel:{
            		textStyle:{
            			color:'#333',
            		}
            	},
            	axisLine:{
                    lineStyle:{
                        color:'#2e8afc',
                        width: 2,
                    }
                } 
            },
            series: [{
                type: 'bar',
                data: [],
                //data:[Math.floor(Math.random() * 99 + 1), Math.floor(Math.random() * 99 + 1), Math.floor(Math.random() * 99 + 1), Math.floor(Math.random() * 99 + 1), Math.floor(Math.random() * 99 + 1), Math.floor(Math.random() * 99 + 1), Math.floor(Math.random() * 99 + 1), Math.floor(Math.random() * 99 + 1), Math.floor(Math.random() * 99 + 1), Math.floor(Math.random() * 99 + 1), Math.floor(Math.random() * 99 + 1), Math.floor(Math.random() * 99 + 1)],
                barWidth: 30,
                itemStyle: {
                    normal: {
                        color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{
                            offset: 0,
                            color: '#2e8afc'
                        }, {
                            offset: 1,
                            color: 'white'
                        }]),
                    }
                }
            }
            ]
        };

        // 使用刚指定的配置项和数据显示图表。
        myChart1.setOption(option1);
        
      	//初始化图标标签
		var myCharts=echarts.init(document.getElementById("Div2"));
      	//折线图
		function zhexiantu(riqi,shuju){
			var options2={
				//定义标题
				title:{
					
				},	
				//鼠标悬停
				tooltip:{
					
				},
				//x轴设置
				xAxis:{
					name:'时间',
					splitLine:{show: false},//去除网格线			
					data:riqi,
					nameTextStyle:{//设置x轴标题属性
		            	color:'#000000',
						fontSize:14
		            },
					axisTick:{//x轴刻度
		       			show:false
		   			},
					axisLabel:{//x轴标示属性
						textStyle:{
							color:'#000000',
							fontSize:14
						}
					},
					axisLine:{//设置轴线属性
						lineStyle:{
							color:'#2e8afc',
							width:2					
						}
		            }
				},
				//y轴设置
				yAxis:{
					//name:'数量',
					splitLine:{show: false},//去除网格线
					nameTextStyle:{//设置y轴标题属性
		            	color:'#000000',
						fontSize:16
		            },
					axisTick:{//y轴刻度
		       			show:false
		   			},
					axisLabel:{//y轴标示属性
						textStyle:{
							color:'#000000',
							fontSize:16
						}
					},
					axisLine:{//设置轴线属性
						lineStyle:{
							color:'#2e8afc',
							width:2						
						}
		            }
				},
				//指定图表类型
				series:[{
					type:'line',
					symbolSize: 5,//拐点大小
					showAllSymbol:true,
					itemStyle:{
						normal:{
							lineStyle:{
								color:'#2e8afc'	
							},	
							areaStyle:{
								
							},
							color: new echarts.graphic.LinearGradient(0, 0, 0, 1,[
								{offset: 0, color: '#2e8afc'},
								{offset: 1, color: 'white'}
		               		])
						}	
					},
					data:shuju
				}]
			}
			//调用统计图
			myCharts.setOption(options2);
		}
      	
		//获得图表的值
		function zhexiantuvalue(){
			/* $.ajax({
				url: getRootPath() + '/dtsTaskController/DtsDiList',		
				type: 'post',
				data: {
					projNo: projNo
				},
				success: function (data) {//后台传来的值是List<Map<String, Object>>
					var riqi=new Array();
					var shuju=new Array();
					for(var i=0;i<data.length;i++){
						riqi[i]=data[i].date;
						shuju[i]=data[i].value;
					}
					zhexiantu(riqi,shuju);
				}
			}) */
			var riqi=new Array("第一周","第二周","第三周","第四周","第五周","第六周","第七周")
			var shuju=new Array(Math.floor(Math.random() * 99 + 1),
					Math.floor(Math.random() * 99 + 1),Math.floor(Math.random() * 99 + 1),
					Math.floor(Math.random() * 99 + 1),Math.floor(Math.random() * 99 + 1),
					Math.floor(Math.random() * 99 + 1),Math.floor(Math.random() * 99 + 1))
			zhexiantu(riqi,shuju);
		}
		
		$(document).ready(function(){
			myCharts.clear();
			zhexiantuvalue();
			$("#process-capability-sel").change(function() { zhexiantuvalue(); });
		})
    </script>
</body>
</html>
